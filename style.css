:root {
    --bg: #121212; --card: #1e1e1e; --text: #ffffff; --text-sec: #b0b0b0;
    --success: #4caf50; --danger: #ef5350; --neutral: #333;
    --theme-color: #ffca28; --theme-glow: rgba(255, 202, 40, 0.3);
    --toast-bg: #333;
}

body { 
    font-family: 'Segoe UI', Roboto, Helvetica, sans-serif; 
    background: var(--bg); color: var(--text); 
    margin: 0; padding: 20px; padding-bottom: 120px; 
    -webkit-user-select: none; user-select: none; -webkit-tap-highlight-color: transparent;
    transition: background 0.3s ease; overflow-x: hidden; 
}

/* HEADER & DASHBOARD */
.identity-bar { background: var(--card); padding: 12px; border-radius: 20px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #333; margin-bottom: 20px; }
.user-info { display: flex; align-items: center; gap: 10px; }
.avatar { width: 35px; height: 35px; background: var(--theme-color); color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
.username { font-weight: bold; color: var(--theme-color); }
.settings-btn { background: transparent; border: none; color: #666; cursor: pointer; padding: 5px; }

.offline-badge { display: none; position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; font-size: 0.6em; padding: 2px 6px; border-radius: 10px; font-weight: bold; border: 2px solid var(--bg); }
body.offline .offline-badge { display: block; }

.dashboard-top { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
.progress-container { position: relative; width: 100px; height: 100px; flex-shrink: 0; }
.progress-ring__circle { transition: stroke-dashoffset 0.5s ease-in-out; transform: rotate(-90deg); transform-origin: 50% 50%; }
.progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: bold; font-size: 1.1em; color: var(--theme-color); }

.scoreboard-mini { flex: 1; display: flex; flex-direction: column; gap: 8px; }
.score-row { background: var(--card); padding: 10px 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #333; cursor: pointer; transition: 0.2s; }
.score-row.active { border-color: var(--theme-color); background: linear-gradient(90deg, var(--card), #2a2a2a); }
.score-row span { font-size: 0.9em; color: #888; } .score-row strong { font-size: 1.2em; color: var(--text); }

.chart-box { background: var(--card); padding: 10px; border-radius: 16px; height: 220px; margin-bottom: 20px; }

/* DATE NAV */
.date-nav { position: relative; display: flex; align-items: center; justify-content: space-between; background: #252525; padding: 10px; border-radius: 15px; margin-bottom: 10px; border: 1px solid #333; }
.date-btn { background: transparent; border: none; color: var(--text); font-size: 1.5em; padding: 0 15px; cursor: pointer; z-index: 2; }
.current-date-wrapper { position: relative; flex: 1; text-align: center; }
.current-date { font-weight: bold; font-size: 1.1em; color: var(--theme-color); text-transform: uppercase; letter-spacing: 1px; }
#datePicker { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; }

.daily-summary { display: flex; justify-content: space-around; background: var(--card); padding: 10px; border-radius: 12px; margin-bottom: 25px; font-size: 0.9em; border: 1px solid #333; }
.sum-item { text-align: center; }
.sum-label { font-size: 0.7em; color: #888; text-transform: uppercase; margin-bottom: 2px; }
.sum-val { font-weight: bold; font-size: 1.1em; transition: color 0.3s; }
.sum-val.earn { color: var(--success); }
.sum-val.spent { color: var(--danger); }
.sum-val.net-pos { color: var(--success); text-shadow: 0 0 10px rgba(76,175,80,0.3); }
.sum-val.net-warn { color: #ff9800; }
.sum-val.net-neg { color: var(--danger); }

/* V11 SHARED NOTES */
.note-container { margin-bottom: 25px; }
.shared-note-area { width: 100%; height: 80px; background: var(--card); color: #ddd; border: 1px solid #333; border-radius: 12px; padding: 12px; font-family: inherit; font-size: 0.9em; resize: none; box-sizing: border-box; transition: border 0.3s; }
.shared-note-area:focus { border-color: var(--theme-color); outline: none; }

/* ITEMS LIST */
h2 { color: var(--text-sec); font-size: 0.8em; margin: 25px 0 10px; letter-spacing: 1px; text-transform: uppercase; border-bottom: 1px solid #333; padding-bottom: 5px;}
.item { background: var(--card); padding: 15px; margin-bottom: 10px; border-radius: 14px; display: flex; justify-content: space-between; align-items: center; border-left: 5px solid #333; transition: 0.2s; position: relative; }
.item.status-done { background: rgba(76, 175, 80, 0.1); } 
.item.status-failed { background: rgba(239, 83, 80, 0.1); }

/* V10/V11 UI Enhancements */
.vals { font-size: 0.85em; color: #888; margin-top: 6px; } 
.val-badge { display: inline-block; background: rgba(255,255,255,0.05); padding: 2px 6px; border-radius: 6px; font-weight: bold; }
.plus { color: var(--success); } .minus { color: var(--danger); }
.shop-price { font-size: 1.1em; font-weight: bold; color: var(--danger); background: rgba(239, 83, 80, 0.1); padding: 2px 8px; border-radius: 6px; }
.shop-count { display: block; font-size: 0.75em; color: #666; margin-top: 2px; }
.tag-pill { font-size: 0.65em; padding: 2px 6px; border-radius: 4px; color: #fff; background: #444; margin-left: 6px; text-transform: uppercase; font-weight: bold; vertical-align: middle; }

/* V11 STREAK */
.streak-badge { font-size: 0.8em; color: #ff9800; background: rgba(255, 152, 0, 0.15); padding: 2px 6px; border-radius: 8px; margin-left: 5px; font-weight: bold; display: inline-flex; align-items: center; gap: 3px; vertical-align: middle; }
.streak-text { font-size: 0.7em; text-transform: uppercase; letter-spacing: 0.5px; opacity: 0.8; }

/* ACTION BUTTONS & COMPONENTS */
.actions-group { display: flex; gap: 8px; align-items: center; }
.btn-status { width: 32px; height: 32px; border-radius: 50%; border: 2px solid #444; background: transparent; color: #666; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
.btn-status.done:hover, .btn-status.done.active { background: var(--success); border-color: var(--success); color: #000; box-shadow: 0 0 10px rgba(76, 175, 80, 0.4); }
.btn-status.failed:hover, .btn-status.failed.active { background: var(--danger); border-color: var(--danger); color: #fff; box-shadow: 0 0 10px rgba(239, 83, 80, 0.4); }
.btn-icon-minimal { background: transparent; border: none; color: #666; cursor: pointer; padding: 8px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: 0.2s; }
.btn-icon-minimal:hover { background: rgba(255,255,255,0.1); color: #fff; }
.btn-delete:hover { background: rgba(239, 83, 80, 0.2); color: var(--danger); }
.accordion { background: #252525; color: #888; cursor: pointer; padding: 15px; width: 100%; border: none; text-align: left; outline: none; font-size: 0.9em; border-radius: 12px; display: flex; justify-content: space-between; margin-top: 10px; box-sizing: border-box;}
.panel { padding: 0 5px; display: none; overflow: hidden; margin-top: 10px; }
.panel.show { display: block; }

/* MODALS */
.modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(5px); }
.modal-box { background: var(--card); padding: 25px; width: 85%; max-width: 400px; border-radius: 20px; border: 1px solid #333; max-height: 85vh; overflow-y: auto; }
input, select.full, textarea { width: 100%; padding: 12px; background: #2a2a2a; border: 1px solid #444; color: #fff; border-radius: 8px; margin: 10px 0; outline: none; box-sizing: border-box; font-family: inherit;}
textarea { resize: vertical; min-height: 60px; }

.btn-main { width: 100%; background: var(--theme-color); color: #000; padding: 12px; border-radius: 10px; border: none; font-weight: bold; margin-top: 10px; cursor: pointer;}
.btn-sec { width: 100%; background: transparent; color: #888; padding: 10px; border: none; margin-top: 5px; cursor: pointer;}
.btn-danger { width: 100%; background: #2a1a1a; color: var(--danger); border: 1px solid var(--danger); padding: 15px; border-radius: 10px; margin-top: 30px; font-weight: bold; cursor: pointer;}
.btn-backup { width: 100%; background: #2a2a2a; color: #fff; border: 1px solid #444; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;}

/* EDIT MODAL SPECIFIC */
.grid-2 { display: flex; gap: 10px; }
.grid-2 .input-group { flex: 1; }
.history-list { margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 12px; font-size: 0.85rem; color: var(--text-sec); max-height: 150px; overflow-y: auto; border: 1px solid rgba(255,255,255,0.05); }
.history-item { margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); }
.history-item:last-child { border-bottom: none; margin-bottom: 0; }
.history-date { color: var(--theme-color); font-weight: bold; font-size: 0.8rem; }
.history-note { font-style: italic; color: #888; margin-top: 2px; font-size: 0.8em; border-left: 2px solid #555; padding-left: 5px; }

/* TAG MANAGER STYLES */
.tag-row { display: flex; align-items: center; justify-content: space-between; background: #252525; padding: 8px 12px; margin-bottom: 5px; border-radius: 8px; }
.color-dot { width: 15px; height: 15px; border-radius: 50%; margin-right: 10px; display: inline-block; }
.switch-group { display: flex; background: #2a2a2a; border-radius: 8px; padding: 4px; margin: 10px 0; border: 1px solid #444; }
.switch-opt { flex: 1; text-align: center; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 0.9em; color: #888; }
.switch-opt.active { background: var(--theme-color); color: #000; font-weight: bold; }

/* STATS */
.stat-card { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; text-align: center; border: 1px solid #333; }
.stat-val { font-size: 1.4em; font-weight: bold; color: var(--theme-color); display: block; margin-bottom: 5px; }
.stat-label { font-size: 0.75em; color: #888; text-transform: uppercase; }
.stat-sub { font-size: 0.7em; color: #666; display: block; margin-top: 3px; }

#toast { visibility: hidden; min-width: 250px; background-color: var(--toast-bg); color: #fff; text-align: center; border-radius: 50px; padding: 12px 20px; position: fixed; z-index: 999; left: 50%; bottom: 30px; transform: translateX(-50%); box-shadow: 0 5px 15px rgba(0,0,0,0.5); font-weight: 500; font-size: 0.9em; border: 1px solid #444; display: flex; align-items: center; justify-content: center; gap: 10px; }
#toast.show { visibility: visible; animation: fadein 0.3s, fadeout 0.3s 2.5s; bottom: 100px; }
@keyframes fadein { from {bottom: 30px; opacity: 0;} to {bottom: 100px; opacity: 1;} }
@keyframes fadeout { from {bottom: 100px; opacity: 1;} to {bottom: 30px; opacity: 0;} }
.fab { position: fixed; bottom: 30px; right: 25px; width: 60px; height: 60px; background: var(--theme-color); color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px var(--theme-glow); z-index: 50; font-size: 30px; cursor: pointer; transition: transform 0.1s; }
.fab:active { transform: scale(0.9); }
.version-tag { position: fixed; bottom: 10px; right: 10px; font-size: 0.7em; color: #444; z-index: 40; font-weight: bold; opacity: 0.5; }